{
  "timestamp": "2025-12-20T17:42:35.322511",
  "phase": "Unified Phase 1 - Ternary Decision System (Production Aligned)",
  "description": "Tunes all 4 models + ensemble using production predict() method",
  "frozen_features_used": true,
  "optimization": {
    "n_trials": 1000,
    "best_trial": 750,
    "best_score": 1.032415505771561
  },
  "data_splits": {
    "train": "2004-09-13 to 2021-12-31",
    "val": "2022-01-03 to 2023-12-31",
    "test": "2024-01-01 to 2025-11-28",
    "train_size": 4358,
    "val_size": 501,
    "test_size": 480
  },
  "test_metrics": {
    "directional_predictions": {
      "total": 480,
      "decisions": 287,
      "up_count": 120,
      "down_count": 167,
      "up_pct": 0.4181184668989547,
      "down_pct": 0.5818815331010453,
      "accuracy": 0.7317073170731707,
      "up_accuracy": 0.75,
      "down_accuracy": 0.718562874251497
    },
    "no_decision_stats": {
      "count": 193,
      "rate": 0.40208333333333335
    },
    "train_metrics": {
      "expansion_mae": 9.818952428855484,
      "compression_mae": 4.8585125839347345,
      "up_accuracy": 0.6426440211154464,
      "down_accuracy": 0.6731696121184301
    },
    "validation": {
      "expansion_mae": 8.802848657686132,
      "compression_mae": 4.819602487994576,
      "up_accuracy": 0.5808383233532934,
      "down_accuracy": 0.5608782435129741
    },
    "features": {
      "expansion": 35,
      "compression": 42,
      "up": 30,
      "down": 31
    }
  },
  "best_parameters": {
    "quality_threshold": 0.5942214939827934,
    "exp_max_depth": 3,
    "exp_learning_rate": 0.03704959027756874,
    "exp_n_estimators": 695,
    "exp_subsample": 0.8127837897387048,
    "exp_colsample_bytree": 0.7820000573076495,
    "exp_colsample_bylevel": 0.7826252664325024,
    "exp_min_child_weight": 5,
    "exp_reg_alpha": 6.852878704561166,
    "exp_reg_lambda": 8.90696694858531,
    "exp_gamma": 0.458949587295002,
    "comp_max_depth": 5,
    "comp_learning_rate": 0.034251003571346174,
    "comp_n_estimators": 455,
    "comp_subsample": 0.9421667781567643,
    "comp_colsample_bytree": 0.8820711927373206,
    "comp_colsample_bylevel": 0.7267773822437791,
    "comp_min_child_weight": 6,
    "comp_reg_alpha": 4.791687946761203,
    "comp_reg_lambda": 3.533404723913824,
    "comp_gamma": 0.3128872949881797,
    "up_max_depth": 5,
    "up_learning_rate": 0.08160369696149243,
    "up_n_estimators": 241,
    "up_subsample": 0.9280433157537576,
    "up_colsample_bytree": 0.7186138432391826,
    "up_min_child_weight": 18,
    "up_reg_alpha": 7.996035096224912,
    "up_reg_lambda": 6.714277907560058,
    "up_gamma": 1.725837599665794,
    "up_scale_pos_weight": 0.9301762369538299,
    "down_max_depth": 4,
    "down_learning_rate": 0.031484496235001165,
    "down_n_estimators": 207,
    "down_subsample": 0.8670039611370324,
    "down_colsample_bytree": 0.9248622188308909,
    "down_min_child_weight": 11,
    "down_reg_alpha": 7.830444038749094,
    "down_reg_lambda": 5.6847617488331466,
    "down_gamma": 2.0598433261416993,
    "down_scale_pos_weight": 0.8440701164188894,
    "up_advantage": -0.02891059128572564,
    "classifier_weight_up": 0.6353644333073052,
    "classifier_weight_down": 0.7377417332653403,
    "mag_scale_up_small": 2.8361340728246978,
    "mag_scale_up_medium": 7.2699324386471105,
    "mag_scale_up_large": 11.957014925819744,
    "mag_scale_down_small": 3.4204848270938504,
    "mag_scale_down_medium": 6.31610933752848,
    "mag_scale_down_large": 9.30073999792699,
    "decision_threshold": 0.6673857418865469
  }
}