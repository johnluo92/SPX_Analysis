{
  "timestamp": "2025-12-16T21:26:20.840764",
  "phase": "Unified Phase 1 - Base Models + Ensemble Config (UPGRADED)",
  "description": "Tunes all 4 models + ensemble with ensemble evaluation. Uses frozen features for stability.",
  "frozen_features_used": true,
  "optimization": {
    "n_trials": 500,
    "best_trial": 346,
    "best_score": 2.260955819038414
  },
  "data_splits": {
    "train": "2004-09-13 to 2021-12-31",
    "val": "2022-01-03 to 2023-12-31",
    "test": "2024-01-01 to 2025-11-28",
    "train_size": 4358,
    "val_size": 501,
    "test_size": 480
  },
  "test_metrics": {
    "all_predictions": {
      "total": 480,
      "up_count": 149,
      "down_count": 331,
      "up_pct": 0.3104166666666667,
      "down_pct": 0.6895833333333333,
      "accuracy": 0.6541666666666667,
      "up_accuracy": 0.7114093959731543,
      "down_accuracy": 0.6283987915407855
    },
    "actionable_signals": {
      "count": 222,
      "rate": 0.4625,
      "up_count": 149,
      "down_count": 73,
      "accuracy": 0.7252252252252253,
      "up_accuracy": 0.7114093959731543,
      "down_accuracy": 0.7534246575342466
    },
    "train_metrics": {
      "expansion_mae": 9.809460304598558,
      "compression_mae": 4.856581407931441,
      "up_accuracy": 0.5704451583295089,
      "down_accuracy": 0.5894905920146857
    },
    "validation": {
      "expansion_mae": 8.813017903871579,
      "compression_mae": 4.828340498597175,
      "up_accuracy": 0.5888223552894212,
      "down_accuracy": 0.5389221556886228
    },
    "features": {
      "expansion": 35,
      "compression": 42,
      "up": 30,
      "down": 31
    }
  },
  "best_parameters": {
    "quality_threshold": 0.5000260321968952,
    "exp_max_depth": 5,
    "exp_learning_rate": 0.016522565844016738,
    "exp_n_estimators": 668,
    "exp_subsample": 0.912224905487845,
    "exp_colsample_bytree": 0.7868131268300984,
    "exp_colsample_bylevel": 0.7544591405922356,
    "exp_min_child_weight": 14,
    "exp_reg_alpha": 6.191967602066855,
    "exp_reg_lambda": 6.230989795233281,
    "exp_gamma": 0.15376066268842423,
    "comp_max_depth": 3,
    "comp_learning_rate": 0.012820985096960181,
    "comp_n_estimators": 605,
    "comp_subsample": 0.9458120943095567,
    "comp_colsample_bytree": 0.8037573609133272,
    "comp_colsample_bylevel": 0.9355468910588473,
    "comp_min_child_weight": 4,
    "comp_reg_alpha": 6.045113848031041,
    "comp_reg_lambda": 9.023384879971054,
    "comp_gamma": 0.10114344159040663,
    "up_max_depth": 4,
    "up_learning_rate": 0.028150358156796042,
    "up_n_estimators": 297,
    "up_subsample": 0.9008959008574092,
    "up_colsample_bytree": 0.7712955301674715,
    "up_min_child_weight": 9,
    "up_reg_alpha": 6.6231539396752535,
    "up_reg_lambda": 9.050658240961683,
    "up_gamma": 1.8426434367105375,
    "up_scale_pos_weight": 0.740978862080104,
    "down_max_depth": 4,
    "down_learning_rate": 0.03917925904974554,
    "down_n_estimators": 217,
    "down_subsample": 0.6274221187973066,
    "down_colsample_bytree": 0.8678237758250209,
    "down_min_child_weight": 16,
    "down_reg_alpha": 8.540172669089852,
    "down_reg_lambda": 19.484266601044958,
    "down_gamma": 1.9034255788389043,
    "down_scale_pos_weight": 0.7735945877265755,
    "up_advantage": 0.035723290595110986,
    "classifier_weight_up": 0.6990399442169605,
    "classifier_weight_down": 0.7366738512189881,
    "mag_scale_up_small": 3.4268600741868918,
    "mag_scale_up_medium": 7.184853145250052,
    "mag_scale_up_large": 11.16661414079489,
    "mag_scale_down_small": 2.5002486497284755,
    "mag_scale_down_medium": 7.673941006764764,
    "mag_scale_down_large": 9.893175375885308,
    "boost_threshold_up": 19.12313145388917,
    "boost_threshold_down": 11.9595515284409,
    "boost_amount_up": 0.03401326815983825,
    "boost_amount_down": 0.05276073108387954,
    "min_confidence_up": 0.6737142798630604,
    "min_confidence_down": 0.6750331909652385,
    "up_thresh_high": 0.6562002245191835,
    "up_thresh_med": 0.7383302070042592,
    "up_thresh_low": 0.7310078883341007,
    "down_thresh_high": 0.7543508668925871,
    "down_thresh_med": 0.795889266817547,
    "down_thresh_low": 0.8076066676599193
  }
}