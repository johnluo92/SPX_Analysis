{
  "timestamp": "2025-12-21T12:44:20.632142",
  "phase": "Unified Phase 1 - Ternary Decision System (Production Aligned)",
  "description": "Tunes all 4 models + ensemble using production predict() method",
  "frozen_features_used": true,
  "optimization": {
    "n_trials": 500,
    "best_trial": 360,
    "best_score": 1.0804230355581153
  },
  "data_splits": {
    "train": "2004-09-13 to 2021-12-31",
    "val": "2022-01-03 to 2023-12-31",
    "test": "2024-01-01 to 2025-11-28",
    "train_size": 4358,
    "val_size": 501,
    "test_size": 480
  },
  "test_metrics": {
    "directional_predictions": {
      "total": 480,
      "decisions": 289,
      "up_count": 123,
      "down_count": 166,
      "up_pct": 0.42560553633217996,
      "down_pct": 0.5743944636678201,
      "accuracy": 0.7231833910034602,
      "up_accuracy": 0.7398373983739838,
      "down_accuracy": 0.7108433734939759
    },
    "no_decision_stats": {
      "count": 191,
      "rate": 0.39791666666666664
    },
    "train_metrics": {
      "expansion_mae": 9.818952428855484,
      "compression_mae": 4.922919652061094,
      "up_accuracy": 0.539820977736975,
      "down_accuracy": 0.6369061280697728
    },
    "validation": {
      "expansion_mae": 8.802848657686132,
      "compression_mae": 4.822565996316681,
      "up_accuracy": 0.5808383233532934,
      "down_accuracy": 0.5249500998003992
    },
    "features": {
      "expansion": 35,
      "compression": 42,
      "up": 30,
      "down": 31
    }
  },
  "best_parameters": {
    "quality_threshold": 0.6010112607514188,
    "exp_max_depth": 3,
    "exp_learning_rate": 0.056793932731160394,
    "exp_n_estimators": 525,
    "exp_subsample": 0.7429252169248889,
    "exp_colsample_bytree": 0.7668759511790624,
    "exp_colsample_bylevel": 0.8083641958596264,
    "exp_min_child_weight": 11,
    "exp_reg_alpha": 6.913058826351311,
    "exp_reg_lambda": 8.444166928128672,
    "exp_gamma": 0.244725154573189,
    "comp_max_depth": 5,
    "comp_learning_rate": 0.05181053122079431,
    "comp_n_estimators": 425,
    "comp_subsample": 0.8732898865582799,
    "comp_colsample_bytree": 0.8959180941185789,
    "comp_colsample_bylevel": 0.8160196366058093,
    "comp_min_child_weight": 5,
    "comp_reg_alpha": 4.197711396721511,
    "comp_reg_lambda": 4.807910951099273,
    "comp_gamma": 0.4271552835306888,
    "up_max_depth": 4,
    "up_learning_rate": 0.05574324203043593,
    "up_n_estimators": 209,
    "up_subsample": 0.9302197540398834,
    "up_colsample_bytree": 0.7787062694098384,
    "up_min_child_weight": 9,
    "up_reg_alpha": 3.874676858115486,
    "up_reg_lambda": 18.591176378988763,
    "up_gamma": 1.6774316676888255,
    "up_scale_pos_weight": 0.7310732132805462,
    "down_max_depth": 4,
    "down_learning_rate": 0.019053576455381447,
    "down_n_estimators": 293,
    "down_subsample": 0.843734052206713,
    "down_colsample_bytree": 0.9412011561285673,
    "down_min_child_weight": 9,
    "down_reg_alpha": 3.8104238783890785,
    "down_reg_lambda": 13.975588015896905,
    "down_gamma": 1.9400918143211594,
    "down_scale_pos_weight": 0.7198922319493126,
    "up_advantage": 0.04836488295505034,
    "classifier_weight_up": 0.6532599570156093,
    "classifier_weight_down": 0.737137961438333,
    "mag_scale_up_small": 3.731238413338659,
    "mag_scale_up_medium": 7.222090837031555,
    "mag_scale_up_large": 11.574880265404495,
    "mag_scale_down_small": 3.5945752717696715,
    "mag_scale_down_medium": 7.768180073831391,
    "mag_scale_down_large": 9.533956239078865,
    "decision_threshold": 0.6778498496499219
  }
}